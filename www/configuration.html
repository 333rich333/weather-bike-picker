<!DOCTYPE html>
<html>
  <head>
    <title>Hello, World!</title>

    <script src="eel.js"></script>
      <script>
      function callPython() {
        eel.say_hello_py();
      }
      function addText(text) {
        var div = document.getElementById("content");
        div.innerHTML += "<br>" + text;
      }
      eel.expose(addText);

      function compute() {
        var textbox = document.getElementById("input");
        text = textbox.value;
        eel.sort(text);
      }

      eel.expose(showAnswers);
      function showAnswers(answer){
        var outputDiv = document.getElementById("result");
        outputDiv.innerHTML = "Result: " + answer;
      }

let config = {};  // This will hold our fetched config
      // Fetch the config.json file
      fetch('../config.json')
        .then(response => {
          if (!response.ok) {
            throw new Error('Failed to load config.json');
          }
          return response.json();
        })
        .then(data => {
          config = data;
          console.log("Loaded config:", config);
          console.log("Conditions:", config.wind.condition);
          console.log("Selected:", config.wind.intensity);
          populateDropdown(config.wind.condition, config.wind.intensity);
        })
        .catch(error => {
          console.error('Error loading JSON:', error);
        });

// Populate the dropdown with condition values
function populateDropdown(conditions, selected) {
  const select = document.getElementById('intensity');
  select.innerHTML = ''; // Clear previous options

  conditions.forEach(condition => {
    const option = document.createElement('option');
    option.value = condition;
    option.textContent = condition;
    if (condition === selected) {
      option.selected = true;
    }
    select.appendChild(option);
  });
}
// Update intensity in config object and show it
function updateIntensity() {
  const selectedIntensity = document.getElementById('intensity').value;
  config.wind.intensity = selectedIntensity;

  document.getElementById('intensityOutput').textContent =
    `Updated wind intensity: ${config.wind.intensity}`;
}

        function displayName() {
            const name = document.getElementById('name').value;

            // Display the name in the paragraph with id "nameOutput"
            document.getElementById('nameOutput').innerHTML = `Hello, ${name}!`;
        }

    </script>
  </head>

  <body>
    <h1>Beep Boop</h1>
    <button onclick="callPython()">CLICKING</button>
    <p>Text:</p>
    <button onclick="content">Time_Get</button>
    <div id="content"></div>

  <div id="input"></div>
  <div id="result"></div>

    <form id="userInputForm">
        <label for="name">Your Name:</label>
        <input type="text" id="name" name="name" required><br><br>

        <button type="button" onclick="displayName()">Submit</button>
    </form>

    <h2>Your Name:</h2>
    <p id="nameOutput"></p>
    <h2>Update Wind Intensity</h2>

    <form id="windForm">
      <label for="intensity">Wind Intensity:</label>
      <select id="intensity"></select>
      <button type="button" onclick="updateIntensity()">Update</button>
    </form>

    <p id="intensityOutput"></p>

    <a href="index.html">Go to Home Page</a>
  </body>
</html>